{"chunk":0,"numChunks":1,"fileHash":"1niE4RdSawzQ1F3FBjOGGSEbu6watlaGBUfZu7CYhWk=","filePath":"internal/handler/comment_handler.go","content":"package handler\n\nimport (\n\t\"fmt\"\n\t\"forum/internal/comment\"\n\t\"forum/internal/session\"\n\t\"forum/internal/util\"\n\t\"net/http\"\n)\n\n// commentHandler handles adding a comment to a post\nfunc CommentHandler(w http.ResponseWriter, r *http.Request) {\n\tif r.Method != \"POST\" {\n\t\thttp.Error(w, \"Invalid request method\", http.StatusMethodNotAllowed)\n\t\treturn\n\t}\n\n\tsessionID, err := session.GetUserIDFromSession(r)\n\tif util.ErrorCheckHandlers(w, r, \"Invalid session\", err, http.StatusUnauthorized) {\n\t\treturn\n\t}\n\n\tpostID := r.FormValue(\"post_id\")\n\tif postID == \"\" {\n\t\thttp.Error(w, \"Post ID is missing\", http.StatusBadRequest)\n\t\treturn\n\t}\n\n\tcontent := r.FormValue(\"content\")\n\tif content == \"\" {\n\t\thttp.Error(w, \"Content is missing\", http.StatusBadRequest)\n\t\treturn\n\t}\n\n\tif err := comment.AddComment(sessionID, postID, content); util.ErrorCheckHandlers(w, r, \"Failed to add the comment\", err, http.StatusInternalServerError) {\n\t\treturn\n\t}\n\n\thttp.Redirect(w, r, fmt.Sprintf(\"/post?id=%s\", postID), http.StatusFound)\n}\n"}