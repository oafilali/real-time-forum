{"chunk":0,"numChunks":1,"fileHash":"a3s7AbAU+rJsib/fbg73lDC7TcGHw/NFQ7NNrDsFF0Y=","filePath":"internal/handler/like_handler.go","content":"package handler\n\nimport (\n\t\"forum/internal/reaction\"\n\t\"forum/internal/session\"\n\t\"forum/internal/util\"\n\t\"net/http\"\n)\n\n// likeHandler handles liking or disliking a post or comment\nfunc LikeHandler(w http.ResponseWriter, r *http.Request) {\n\tif r.Method != \"POST\" {\n\t\thttp.Error(w, \"Invalid request method\", http.StatusMethodNotAllowed)\n\t\treturn\n\t}\n\n\tsessionID, err := session.GetUserIDFromSession(r)\n\n\tif err != nil {\n\t\thttp.Redirect(w, r, \"/login\", http.StatusFound)\n\t}\n\n\tif util.ErrorCheckHandlers(w, r, \"Invalid session\", err, http.StatusUnauthorized) {\n\t\treturn\n\t}\n\n\titemID := r.FormValue(\"item_id\")\n\tif itemID == \"\" {\n\t\thttp.Error(w, \"Item ID is missing\", http.StatusBadRequest)\n\t\treturn\n\t}\n\n\tisComment := r.FormValue(\"is_comment\") == \"true\"\n\treactionType := r.FormValue(\"type\") // \"like\" or \"dislike\"\n\n\tif err := reaction.LikeItem(sessionID, itemID, isComment, reactionType); util.ErrorCheckHandlers(w, r, \"Failed to like the item\", err, http.StatusInternalServerError) {\n\t\treturn\n\t}\n\n\thttp.Redirect(w, r, r.Header.Get(\"Referer\"), http.StatusFound)\n}\n"}