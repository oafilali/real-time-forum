{"chunk":0,"numChunks":1,"fileHash":"NC9dOtFnYiWrcyEXlQGtBC2ZxIwZn9tHTAgiD00Eejk=","filePath":"internal/handler/home_handler.go","content":"package handler\n\nimport (\n\t\"forum/internal/database\"\n\t\"forum/internal/model\"\n\t\"forum/internal/post\"\n\t\"forum/internal/session\"\n\t\"forum/internal/util\"\n\t\"net/http\"\n)\n\nfunc HomeHandler(w http.ResponseWriter, r *http.Request) {\n\tif r.Method == \"GET\" {\n\t\tuserID, _ := session.GetUserIDFromSession(r)\n\t\tvar username string\n\t\tif userID > 0 {\n\t\t\t_ = database.Db.QueryRow(\"SELECT username FROM users WHERE id = ?\", userID).Scan(&username)\n\t\t}\n\n\t\tallPosts, err := post.FetchPosts()\n\t\tif util.ErrorCheckHandlers(w, r, \"Failed to load posts\", err, http.StatusInternalServerError) {\n\t\t\treturn\n\t\t}\n\t\tif len(allPosts) > 5 {\n\t\t\tallPosts = allPosts[:5]\n\t\t}\n\n\t\tdata := model.Data{\n\t\t\tPosts:     allPosts,\n\t\t\tSessionID: userID,\n\t\t\tUsername:  username,\n\t\t}\n\n\t\terr = util.Templates.ExecuteTemplate(w, \"home.html\", data)\n\t\tif util.ErrorCheckHandlers(w, r, \"Failed to render the template\", err, http.StatusInternalServerError) {\n\t\t\treturn\n\t\t}\n\n\t} else {\n\t\thttp.Error(w, \"Invalid request method\", http.StatusMethodNotAllowed)\n\t}\n}\n"}