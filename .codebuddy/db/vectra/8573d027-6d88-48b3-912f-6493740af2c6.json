{"chunk":0,"numChunks":1,"fileHash":"zTW/TJEwImf9pKZ6hvUp2KDeqwsxJ3GtM2+M7lG3Bhk=","filePath":"internal/comment/comment.go","content":"package comment\n\nimport (\n\t\"forum/internal/database\"\n\t\"forum/internal/model\"\n\t\"forum/internal/reaction\"\n)\n\nfunc FetchCommentsForPost(postID int) ([]model.Comment, error) {\n\tcommentRows, err := database.Db.Query(`\n    SELECT c.id, c.user_id, c.content, u.username\n    FROM comments c\n    JOIN users u ON u.id = c.user_id\n    WHERE c.post_id = ?`, postID)\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\tdefer commentRows.Close()\n\n\tvar comments []model.Comment\n\n\tfor commentRows.Next() {\n\t\tvar comment model.Comment\n\t\terr := commentRows.Scan(&comment.ID, &comment.UserID, &comment.Content, &comment.Username)\n\t\tif err != nil {\n\t\t\treturn nil, err\n\t\t}\n\n\t\tcomment.Likes, comment.Dislikes, err = reaction.FetchReactionsNumber(comment.ID, true)\n\t\tif err != nil {\n\t\t\treturn nil, err\n\t\t}\n\n\t\tcomments = append(comments, comment)\n\t}\n\n\tif err := commentRows.Err(); err != nil {\n\t\treturn nil, err\n\t}\n\n\treturn comments, nil\n}\n\nfunc AddComment(userID int, postID string, content string) error {\n\tquery := \"INSERT INTO comments (user_id, post_id, content) VALUES (?, ?, ?)\"\n\t_, err := database.Db.Exec(query, userID, postID, content)\n\treturn err\n}\n"}